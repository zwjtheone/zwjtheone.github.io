

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.ico">
  <link rel="icon" href="/img/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Mr.Jaxson">
  <meta name="keywords" content="Jaxson, Jaxson Blog, 博客, 个人网站, 互联网, 前端, 设计, 产品, zwjtheone, zwjay, zwj47, 黄思棋的男朋友">
  
    <meta name="description" content="看MDN 的文档才知道HTML5很多API还没有学习过，这里记录学习HTML5 新 api。 &lt;!DOCTYPE html&gt; &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt; HTML5是最新进化的标准,它定义了HTML。这个词代表了两个不同的概  这是一个新版本的HTML语言,与新元素、属性和行为 和一组更大的技术,允许更加多样化和功能强大的Web站点和应">
<meta property="og:type" content="article">
<meta property="og:title" content="HTML5-API汇总学习">
<meta property="og:url" content="https://www.zwjay.cn/2016/11/30/2016-11-30-HTML5-API-all/index.html">
<meta property="og:site_name" content="Jaxson&#39;Blog">
<meta property="og:description" content="看MDN 的文档才知道HTML5很多API还没有学习过，这里记录学习HTML5 新 api。 &lt;!DOCTYPE html&gt; &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt; HTML5是最新进化的标准,它定义了HTML。这个词代表了两个不同的概  这是一个新版本的HTML语言,与新元素、属性和行为 和一组更大的技术,允许更加多样化和功能强大的Web站点和应">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://resource.zwjay.cn/jekyll/img/html5-all.png">
<meta property="og:image" content="http://resource.zwjay.cn/jekyll/img/in-post/html-tag.png">
<meta property="article:published_time" content="2016-11-30T07:43:00.000Z">
<meta property="article:modified_time" content="2016-12-12T02:17:00.000Z">
<meta property="article:author" content="Mr.Jaxson">
<meta property="article:tag" content="HTML5">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://resource.zwjay.cn/jekyll/img/html5-all.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>HTML5-API汇总学习 - Jaxson&#39;Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"www.zwjay.cn","root":"/","version":"1.9.1","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":"0c5ab9917e153a67360172154ba0dc64","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 30vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Jaxson&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="HTML5-API汇总学习"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Mr.Jaxson
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2016-11-30 15:43" pubdate>
          2016年11月30日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          30k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          248 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">HTML5-API汇总学习</h1>
            
              <p class="note note-info">
                
                  
                    本文最后更新于：2016年12月12日 上午
                  
                
              </p>
            
            <div class="markdown-body">
              
              <p>看<code>MDN</code> 的文档才知道HTML5很多API还没有学习过，这里记录学习HTML5 新 api。</p>
<p><code>&lt;!DOCTYPE html&gt; &lt;meta charset=&quot;UTF-8&quot;&gt;</code></p>
<p>HTML5是最新进化的标准,它定义了HTML。这个词代表了两个不同的概</p>
<ul>
<li>这是一个新版本的HTML语言,与新元素、属性和行为</li>
<li>和一组更大的技术,允许更加多样化和功能强大的Web站点和应用程序。这组有时被称为HTML5&amp;朋友和通常缩短HTML5。</li>
</ul>
<p>HTML5 大概包含以下几点</p>
<ol>
<li>语义:允许您更精确地描述你的内容是什么。</li>
<li>连通性:允许您以新的和创新的方式与服务器通信。</li>
<li>离线存储:允许网页在客户端本地存储数据和离线操作更有效率。</li>
<li>多媒体:制作视频和音频开放网络中的一等公民。</li>
<li>2d &#x2F; 3d图形和效果:允许一个更加多样化的选择范围。</li>
<li>性能和集成:提供更大的速度优化和更好的使用计算机硬件。</li>
<li>设备访问:允许使用各种输入和输出设备。</li>
<li>样式:让作者编写更复杂的主题。</li>
</ol>
   <a class="fancybox_img"  rel="group noopener" target="_blank" href="http://resource.zwjay.cn/jekyll/img/html5-all.png">
        <img src="http://resource.zwjay.cn/jekyll/img/html5-all.png" srcset="/img/loading.gif" lazyload alt="html5-all" />
   </a>


<span id="more"></span>

<h1 id="语义化"><a href="#语义化" class="headerlink" title="语义化"></a>语义化</h1><h2 id="语义化标签，在-HTML4-中-lt-div-gt-标签不精确，不够明显的描述文档轮廓。在-HTML5-更新语义化标签。"><a href="#语义化标签，在-HTML4-中-lt-div-gt-标签不精确，不够明显的描述文档轮廓。在-HTML5-更新语义化标签。" class="headerlink" title="语义化标签，在 HTML4 中 &lt;div&gt; 标签不精确，不够明显的描述文档轮廓。在 HTML5 更新语义化标签。"></a>语义化标签，在 <code>HTML4</code> 中 <code>&lt;div&gt;</code> 标签不精确，不够明显的描述文档轮廓。在 <code>HTML5</code> 更新语义化标签。</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Forest elephants<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Introduction<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>In this section, we discuss the lesser known forest elephants.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Habitat<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Forest elephants do not live in trees but among them.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">aside</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>advertising block<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>(c) 2010 The Example company<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>这样可以直观的看出html的结构，而且更利于SEO。</p>
<p>HTML5中引入的新语义元素带来的能力描述web文档的结构和轮廓在一个标准的方式。他们给人们带来一个很大的优势在HTML5浏览器和需要帮助他们理解页面结构,例如人需要一些辅助技术的帮助。这些新的语义元素是使用简单,用很少的负担,也可以工作在non-HTML5浏览器。因此他们应该使用没有限制。</p>
<h2 id="标签使用选择顺序（参考）"><a href="#标签使用选择顺序（参考）" class="headerlink" title="标签使用选择顺序（参考）"></a>标签使用选择顺序（参考）</h2>   <a class="fancybox_img"  rel="group noopener" target="_blank" href="http://resource.zwjay.cn/jekyll/img/in-post/html-tag.png">
        <img src="http://resource.zwjay.cn/jekyll/img/in-post/html-tag.png" srcset="/img/loading.gif" lazyload alt="html5-all" />
   </a>

<h2 id="video-audio"><a href="#video-audio" class="headerlink" title="video audio"></a><code>video</code> <code>audio</code></h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;http://v2v.cc/~j/theora_testsuite/320x240.ogg&quot;</span> <span class="hljs-attr">controls</span>&gt;</span><br>  Your browser does not support the <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>video<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span> element.<br><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>controls : Displays the standard HTML5 controls for the audio on the web page.</li>
<li>autoplay : Makes the audio play automatically.</li>
<li>loop : Make the audio repeat (loop) automatically.</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">audio</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/test/audio.ogg&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Your browser does not support the <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>audio<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span> element.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">audio</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>“none” does not buffer the file</li>
<li>“auto” buffers the media file</li>
<li>“metadata” buffers only the metadata for the file</li>
</ul>
<h3 id="用JS控制多媒体标签"><a href="#用JS控制多媒体标签" class="headerlink" title="用JS控制多媒体标签"></a>用JS控制多媒体标签</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;audio id=<span class="hljs-string">&quot;demo&quot;</span> src=<span class="hljs-string">&quot;audio.mp3&quot;</span>&gt;&lt;/audio&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;document.getElementById(&#x27;demo&#x27;).play()&quot;</span>&gt;</span>Play the Audio<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;document.getElementById(&#x27;demo&#x27;).pause()&quot;</span>&gt;</span>Pause the Audio<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;document.getElementById(&#x27;demo&#x27;).volume+=0.1&quot;</span>&gt;</span>Increase Volume<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;document.getElementById(&#x27;demo&#x27;).volume-=0.1&quot;</span>&gt;</span>Decrease Volume<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>更多API点击 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement">https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement</a></p>
<h2 id="在HTML5中的表单"><a href="#在HTML5中的表单" class="headerlink" title="在HTML5中的表单"></a>在HTML5中的表单</h2><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-pattern">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-pattern</a></p>
<h3 id="input标签-type-属性"><a href="#input标签-type-属性" class="headerlink" title="input标签 type 属性"></a><code>input</code>标签 <code>type</code> 属性</h3><ul>
<li>search </li>
<li>tel</li>
<li>url</li>
<li>email</li>
<li>number</li>
<li>text</li>
<li>checkbox</li>
<li>radio</li>
<li>date</li>
<li>color</li>
<li>datetime</li>
<li>file</li>
<li>image</li>
<li>hidden</li>
<li>month</li>
<li>password</li>
<li>range</li>
<li>reset</li>
<li>submit</li>
<li>week</li>
</ul>
<p>其他属性</p>
<ul>
<li>list  用法</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">list</span>=<span class="hljs-string">&quot;browsers&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;myBrowser&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">datalist</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;browsers&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Chrome&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Firefox&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Internet Explorer&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Opera&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Safari&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Microsoft Edge&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">datalist</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>pattern<br> 一个正则表达式检查与控制的价值。模式必须匹配整个价值,而不仅仅是一个子集。使用title属性来描述模式来帮助用户。这个属性适用于当type属性的值是文本,搜索,电话,地址,电子邮件,或密码,否则它将被忽略。正则表达式语言JavaScript RegExp算法是一样的,与“u”参数,使其治疗模式的序列unicode代码点。模式不是包围正斜杠。</li>
</ul>
<h2 id="MathML-数学表达式标签"><a href="#MathML-数学表达式标签" class="headerlink" title="MathML (数学表达式标签)"></a>MathML (数学表达式标签)</h2><p><math style="display: block;"> <mtable columnalign="right center left"> <mtr> <mtd> <msup> <mrow> <mo> ( </mo> <mi> a </mi> <mo> + </mo> <mi> b </mi> <mo> ) </mo> </mrow> <mn> 2 </mn> </msup> </mtd> <mtd> <mo> &#x3D; </mo> </mtd> <mtd> <msup><mi> c </mi><mn>2</mn></msup> <mo> + </mo> <mn> 4 </mn> <mo> ⋅ </mo> <mo>(</mo> <mfrac> <mn> 1 </mn> <mn> 2 </mn> </mfrac> <mi> a </mi><mi> b </mi> <mo>)</mo> </mtd> </mtr> <mtr> <mtd> <msup><mi> a </mi><mn>2</mn></msup> <mo> + </mo> <mn> 2 </mn><mi> a </mi><mi> b </mi> <mo> + </mo> <msup><mi> b </mi><mn>2</mn></msup> </mtd> <mtd> <mo> &#x3D; </mo> </mtd> <mtd> <msup><mi> c </mi><mn>2</mn></msup> <mo> + </mo> <mn> 2 </mn><mi> a </mi><mi> b </mi> </mtd> </mtr> <mtr> <mtd> <msup><mi> a </mi><mn>2</mn></msup> <mo> + </mo> <msup><mi> b </mi><mn>2</mn></msup> </mtd> <mtd> <mo> &#x3D; </mo> </mtd> <mtd> <msup><mi> c </mi><mn>2</mn></msup> </mtd> </mtr> </mtable> </math></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/MathML">https://developer.mozilla.org/en-US/docs/Web/MathML</a></p>
<h1 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h1><h2 id="Web-Sockets"><a href="#Web-Sockets" class="headerlink" title="Web Sockets"></a>Web Sockets</h2><p>允许创建一个永久的页面和服务器之间的连接和交换,是HTML5一种新的协议。它实现了浏览器与服务器全双工通信(full-duplex)。一开始的握手需要借助HTTP请求完成。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API">https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API</a></p>
<h2 id="Server-Sent-服务端推送事件"><a href="#Server-Sent-服务端推送事件" class="headerlink" title="Server-Sent 服务端推送事件"></a>Server-Sent 服务端推送事件</h2><p><a target="_blank" rel="noopener" href="http://www.ibm.com/developerworks/cn/web/1307_chengfu_serversentevent/">http://www.ibm.com/developerworks/cn/web/1307_chengfu_serversentevent&#x2F;</a><br><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events">https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events&#x2F;Using_server-sent_events</a></p>
<p><code>EventSource</code> 对象提供的标准事件</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
<th>事件处理方法</th>
</tr>
</thead>
<tbody><tr>
<td>open</td>
<td>当成功与服务器建立连接时产生</td>
<td></td>
</tr>
<tr>
<td>message</td>
<td>当收到服务器发送的事件时产生</td>
<td>onmessage</td>
</tr>
<tr>
<td>error</td>
<td>当出现错误时产生</td>
<td>onerror</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> es = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(<span class="hljs-string">&#x27;events&#x27;</span>);<br>es.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">data</span>);<br>&#125;;<br><br>es.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;myevent&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">data</span>);<br>&#125;);<br><br> <span class="hljs-keyword">var</span> es = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(<span class="hljs-string">&#x27;sse/movement&#x27;</span>); <br> es.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;message&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123; <br>     <span class="hljs-keyword">var</span> pos = e.<span class="hljs-property">data</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;,&#x27;</span>), x = pos[<span class="hljs-number">0</span>], y = pos[<span class="hljs-number">1</span>]; <br>     $(<span class="hljs-string">&#x27;#box&#x27;</span>).<span class="hljs-title function_">css</span>(&#123; <br>         left : x + <span class="hljs-string">&#x27;px&#x27;</span>, <br>         top : y + <span class="hljs-string">&#x27;px&#x27;</span> <br>         &#125;); <br>     &#125;);<br></code></pre></td></tr></table></figure>

<blockquote>
<p>第一种办法是在其他浏览器上使用原生 EventSource 对象，而在 IE 上则使用简易轮询或 COMET 技术来实现；另外一种做法是使用 polyfill 技术，即使用第三方提供的 JavaScript 库来屏蔽浏览器的不同。本文使用的是 polyfill 技术，只需要在页面中加载第三方 JavaScript 库即可。应用本身的浏览器端代码并不需要进行改动。一般推荐使用第二种做法，因为这样的话，在服务器端只需要使用一种实现技术即可。</p>
</blockquote>
<h2 id="WebRTC"><a href="#WebRTC" class="headerlink" title="WebRTC"></a>WebRTC</h2><p>RTC代表实时通信的技术,允许连接到其他人和控制视频会议直接在浏览器中,而不需要一个插件或外部应用程序。WebRTC（Web实时通信）是一种技术，使Web应用程序和网站来捕捉和可选的音频和&#x2F;或视频流媒体，以及交换任意数据之间的浏览器不需要中介。该系列标准包括WebRTC能够共享数据和执行会议的对等，而不需要用户安装插件或任何其他第三方软件。<br>WebRTC由几个相互关联的应用程序接口和协议，共同实现这。文件，你会发现这里将帮助你理解WebRTC的基础，如何设置和使用数据和媒体的连接，和更多。</p>
<h1 id="离线-amp-存储"><a href="#离线-amp-存储" class="headerlink" title="离线&amp;存储"></a>离线&amp;存储</h1><h2 id="The-application-cache-manifest-x3D-”example-appcache”"><a href="#The-application-cache-manifest-x3D-”example-appcache”" class="headerlink" title="The application cache manifest&#x3D;”example.appcache”"></a>The application cache manifest&#x3D;”example.appcache”</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">manifest</span>=<span class="hljs-string">&quot;example.appcache&quot;</span>&gt;</span><br>  ...<br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>这种方式已经过时，不推荐使用。</p>
<h2 id="在线-amp-离线事件"><a href="#在线-amp-离线事件" class="headerlink" title="在线&amp;离线事件"></a>在线&amp;离线事件</h2><h3 id="navigator-onLine"><a href="#navigator-onLine" class="headerlink" title="navigator.onLine"></a>navigator.onLine</h3><p>navigator.onLine return true&#x2F;false</p>
<p>e.g</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;load&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> status = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;status&quot;</span>);<br>  <span class="hljs-keyword">var</span> log = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;log&quot;</span>);<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateOnlineStatus</span>(<span class="hljs-params">event</span>) &#123;<br>    <span class="hljs-keyword">var</span> condition = navigator.<span class="hljs-property">onLine</span> ? <span class="hljs-string">&quot;online&quot;</span> : <span class="hljs-string">&quot;offline&quot;</span>;<br><br>    status.<span class="hljs-property">className</span> = condition;<br>    status.<span class="hljs-property">innerHTML</span> = condition.<span class="hljs-title function_">toUpperCase</span>();<br><br>    log.<span class="hljs-title function_">insertAdjacentHTML</span>(<span class="hljs-string">&quot;beforeend&quot;</span>, <span class="hljs-string">&quot;Event: &quot;</span> + event.<span class="hljs-property">type</span> + <span class="hljs-string">&quot;; Status: &quot;</span> + condition);<br>  &#125;<br><br>  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;online&#x27;</span>,  updateOnlineStatus);<br>  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;offline&#x27;</span>, updateOnlineStatus);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h2 id="Web-Storage-API"><a href="#Web-Storage-API" class="headerlink" title="Web Storage API"></a>Web Storage API</h2><ul>
<li>sessionStorage </li>
<li>localStorage</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/mdn/web-storage-demo">https://github.com/mdn/web-storage-demo</a></p>
<ul>
<li><p>Storage.length </p>
</li>
<li><p>Storage.key()<br> 当传入一个数字，这个方法会返回这个名字在storage中根据索引。</p>
</li>
<li><p>Storage.getItem()<br> 当传入一个<code>key</code>的名字，返回值</p>
</li>
<li><p>Storage.setItem()<br> 当传入一个<code>key</code>的名字，会在storage增加这个键值对，或者当存在时更新这个值。</p>
</li>
<li><p>Storage.removeItem()<br> 当传入一个<code>key</code>的名字，会删除这个键值对。<br>Storage.clear()<br> 当调用这个方法，会清空storage。</p>
</li>
</ul>
<p>e.g</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;bgcolor&#x27;</span>)) &#123;<br>  <span class="hljs-title function_">populateStorage</span>();<br>&#125;<br><span class="hljs-title function_">setStyles</span>();<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">populateStorage</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;bgcolor&#x27;</span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;bgcolor&#x27;</span>).<span class="hljs-property">value</span>);<br>  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;font&#x27;</span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;font&#x27;</span>).<span class="hljs-property">value</span>);<br>  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;image&#x27;</span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;image&#x27;</span>).<span class="hljs-property">value</span>);<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">setStyles</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> currentColor = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;bgcolor&#x27;</span>);<br>  <span class="hljs-keyword">var</span> currentFont = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;font&#x27;</span>);<br>  <span class="hljs-keyword">var</span> currentImage = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;image&#x27;</span>);<br><br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;bgcolor&#x27;</span>).<span class="hljs-property">value</span> = currentColor;<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;font&#x27;</span>).<span class="hljs-property">value</span> = currentFont;<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;image&#x27;</span>).<span class="hljs-property">value</span> = currentImage;<br><br>  htmlElem.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">&#x27;#&#x27;</span> + currentColor;<br>  pElem.<span class="hljs-property">style</span>.<span class="hljs-property">fontFamily</span> = currentFont;<br>  imgElem.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&#x27;src&#x27;</span>, currentImage);<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="IndexedDB-API"><a href="#IndexedDB-API" class="headerlink" title="IndexedDB API"></a>IndexedDB API</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><ol>
<li>Open a database.</li>
<li>Create an object store in the database. </li>
<li>Start a transaction and make a request to do some database operation, like adding or retrieving data.</li>
<li>Wait for the operation to complete by listening to the right kind of DOM event.</li>
<li>Do something with the results (which can be found on the request object).</li>
</ol>
<p><em>兼容</em></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// In the following line, you should include the prefixes of implementations you want to test.</span><br><span class="hljs-variable language_">window</span>.<span class="hljs-property">indexedDB</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">indexedDB</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">mozIndexedDB</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">webkitIndexedDB</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">msIndexedDB</span>;<br><span class="hljs-comment">// DON&#x27;T use &quot;var indexedDB = ...&quot; if you&#x27;re not in a function.</span><br><span class="hljs-comment">// Moreover, you may need references to some window.IDB* objects:</span><br><span class="hljs-variable language_">window</span>.<span class="hljs-property">IDBTransaction</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">IDBTransaction</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">webkitIDBTransaction</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">msIDBTransaction</span> || &#123;<span class="hljs-attr">READ_WRITE</span>: <span class="hljs-string">&quot;readwrite&quot;</span>&#125;; <span class="hljs-comment">// This line should only be needed if it is needed to support the object&#x27;s constants for older browsers</span><br><span class="hljs-variable language_">window</span>.<span class="hljs-property">IDBKeyRange</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">IDBKeyRange</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">webkitIDBKeyRange</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">msIDBKeyRange</span>;<br><span class="hljs-comment">// (Mozilla has never prefixed these objects, so we don&#x27;t need window.mozIDB*)</span><br></code></pre></td></tr></table></figure>

<h3 id="基本例子"><a href="#基本例子" class="headerlink" title="基本例子"></a>基本例子</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">dbName</span> = <span class="hljs-string">&quot;the_name&quot;</span>;<br><br><span class="hljs-keyword">var</span> request = indexedDB.<span class="hljs-title function_ invoke__">open</span>(dbName, <span class="hljs-number">2</span>);<br><br>request.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>&#123;<br>  <span class="hljs-comment">// Handle errors.</span><br>&#125;;<br>request.onupgradeneeded = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> db = event.target.result;<br><br>  <span class="hljs-comment">// Create an objectStore to hold information about our customers. We&#x27;re</span><br>  <span class="hljs-comment">// going to use &quot;ssn&quot; as our key path because it&#x27;s guaranteed to be</span><br>  <span class="hljs-comment">// unique - or at least that&#x27;s what I was told during the kickoff meeting.</span><br>  <span class="hljs-keyword">var</span> objectStore = db.<span class="hljs-title function_ invoke__">createObjectStore</span>(<span class="hljs-string">&quot;customers&quot;</span>, &#123; <span class="hljs-attr">keyPath</span>: <span class="hljs-string">&quot;ssn&quot;</span> &#125;);<br><br>  <span class="hljs-comment">// Create an index to search customers by name. We may have duplicates</span><br>  <span class="hljs-comment">// so we can&#x27;t use a unique index.</span><br>  objectStore.<span class="hljs-title function_ invoke__">createIndex</span>(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>, &#123; <span class="hljs-attr">unique</span>: <span class="hljs-literal">false</span> &#125;);<br><br>  <span class="hljs-comment">// Create an index to search customers by email. We want to ensure that</span><br>  <span class="hljs-comment">// no two customers have the same email, so use a unique index.</span><br>  objectStore.<span class="hljs-title function_ invoke__">createIndex</span>(<span class="hljs-string">&quot;email&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>, &#123; <span class="hljs-attr">unique</span>: <span class="hljs-literal">true</span> &#125;);<br><br>  <span class="hljs-comment">// Use transaction oncomplete to make sure the objectStore creation is </span><br>  <span class="hljs-comment">// finished before adding data into it.</span><br>  objectStore.transaction.oncomplete = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>&#123;<br>    <span class="hljs-comment">// Store values in the newly created objectStore.</span><br>    <span class="hljs-keyword">var</span> customerObjectStore = db.<span class="hljs-title function_ invoke__">transaction</span>(<span class="hljs-string">&quot;customers&quot;</span>, <span class="hljs-string">&quot;readwrite&quot;</span>).<span class="hljs-title function_ invoke__">objectStore</span>(<span class="hljs-string">&quot;customers&quot;</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i in customerData) &#123;<br>      customerObjectStore.<span class="hljs-title function_ invoke__">add</span>(customerData[i]);<br>    &#125;<br>  &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure>

<h2 id="从web应用程序使用文件"><a href="#从web应用程序使用文件" class="headerlink" title="从web应用程序使用文件"></a>从web应用程序使用文件</h2><h3 id="基本使用方法"><a href="#基本使用方法" class="headerlink" title="基本使用方法"></a>基本使用方法</h3><p>现在可以从HTML5的<code>File API</code>读取本地文件，通过<code>&lt;input&gt;</code>的<code>type=&#39;file&#39;</code>，其实是通过 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/DOM/FileReader">FileReader</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&#x27;file&#x27;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#x27;input&#x27;</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>如果选择了文件会返回文件对象通过dom访问得到。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> selectedFile = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;input&#x27;</span>).<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];<br></code></pre></td></tr></table></figure>

<p>jquery:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> selectedFile = $(<span class="hljs-string">&#x27;#input&#x27;</span>).<span class="hljs-title function_">get</span>(<span class="hljs-number">0</span>).<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];<br><br><span class="hljs-keyword">var</span> selectedFile = $(<span class="hljs-string">&#x27;#input&#x27;</span>)[<span class="hljs-number">0</span>].<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];<br></code></pre></td></tr></table></figure>

<p>选择文件后触发方法：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;input&quot;</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">&quot;handleFiles(this.files)&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>如果你想选择多个文件 给 <code>input</code> 加上 <code>multiple</code> 属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;input&quot;</span> <span class="hljs-attr">multiple</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">&quot;handleFiles(this.files)&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>给选择文件夹上监听事件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> inputElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;input&quot;</span>);<br>inputElement.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;change&quot;</span>, handleFiles, <span class="hljs-literal">false</span>);<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleFiles</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> fileList = <span class="hljs-variable language_">this</span>.<span class="hljs-property">files</span>; <span class="hljs-comment">/* now you can work with the file list */</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="e-g-显示文件大小"><a href="#e-g-显示文件大小" class="headerlink" title="e.g 显示文件大小"></a>e.g 显示文件大小</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateSize</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> nBytes = <span class="hljs-number">0</span>,<br>      oFiles = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;uploadInput&quot;</span>).<span class="hljs-property">files</span>,<br>      nFiles = oFiles.<span class="hljs-property">length</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> nFileId = <span class="hljs-number">0</span>; nFileId &lt; nFiles; nFileId++) &#123;<br>    nBytes += oFiles[nFileId].<span class="hljs-property">size</span>;<br>  &#125;<br>  <span class="hljs-keyword">var</span> sOutput = nBytes + <span class="hljs-string">&quot; bytes&quot;</span>;<br>  <span class="hljs-comment">// optional code for multiples approximation</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> aMultiples = [<span class="hljs-string">&quot;KiB&quot;</span>, <span class="hljs-string">&quot;MiB&quot;</span>, <span class="hljs-string">&quot;GiB&quot;</span>, <span class="hljs-string">&quot;TiB&quot;</span>, <span class="hljs-string">&quot;PiB&quot;</span>, <span class="hljs-string">&quot;EiB&quot;</span>, <span class="hljs-string">&quot;ZiB&quot;</span>, <span class="hljs-string">&quot;YiB&quot;</span>], nMultiple = <span class="hljs-number">0</span>, nApprox = nBytes / <span class="hljs-number">1024</span>; nApprox &gt; <span class="hljs-number">1</span>; nApprox /= <span class="hljs-number">1024</span>, nMultiple++) &#123;<br>    sOutput = nApprox.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">3</span>) + <span class="hljs-string">&quot; &quot;</span> + aMultiples[nMultiple] + <span class="hljs-string">&quot; (&quot;</span> + nBytes + <span class="hljs-string">&quot; bytes)&quot;</span>;<br>  &#125;<br>  <span class="hljs-comment">// end of optional code</span><br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;fileNum&quot;</span>).<span class="hljs-property">innerHTML</span> = nFiles;<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;fileSize&quot;</span>).<span class="hljs-property">innerHTML</span> = sOutput;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">&quot;updateSize();&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;uploadForm&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;uploadInput&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;myFiles&quot;</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">&quot;updateSize();&quot;</span> <span class="hljs-attr">multiple</span>&gt;</span> selected files: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fileNum&quot;</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>; total size: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fileSize&quot;</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Send file&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="使用hidden的file-input-通过-click-来触发选择文件"><a href="#使用hidden的file-input-通过-click-来触发选择文件" class="headerlink" title="使用hidden的file input 通过 click() 来触发选择文件"></a>使用<code>hidden</code>的<code>file input</code> 通过 <code>click()</code> 来触发选择文件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fileElem&quot;</span> <span class="hljs-attr">multiple</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">&quot;image/*&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display:none&quot;</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">&quot;handleFiles(this.files)&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fileSelect&quot;</span>&gt;</span>Select some files<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> fileSelect = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;fileSelect&quot;</span>),<br>  fileElem = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;fileElem&quot;</span>);<br><br>fileSelect.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;<br>  <span class="hljs-keyword">if</span> (fileElem) &#123;<br>    fileElem.<span class="hljs-title function_">click</span>();<br>  &#125;<br>  e.<span class="hljs-title function_">preventDefault</span>(); <span class="hljs-comment">// prevent navigation to &quot;#&quot;</span><br>&#125;, <span class="hljs-literal">false</span>);<br></code></pre></td></tr></table></figure>

<h3 id="通过label元素来触发隐藏的file-input"><a href="#通过label元素来触发隐藏的file-input" class="headerlink" title="通过label元素来触发隐藏的file input"></a>通过<code>label</code>元素来触发隐藏的<code>file input</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fileElem&quot;</span> <span class="hljs-attr">multiple</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">&quot;image/*&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display:none&quot;</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">&quot;handleFiles(this.files)&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;fileElem&quot;</span>&gt;</span>Select some files<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="选择文件通过拖拽拖放"><a href="#选择文件通过拖拽拖放" class="headerlink" title="选择文件通过拖拽拖放"></a>选择文件通过拖拽拖放</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/Events/dragenter">文档</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> dropbox;<br><br>dropbox = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;dropbox&quot;</span>);<br>dropbox.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;dragenter&quot;</span>, dragenter, <span class="hljs-literal">false</span>);<br>dropbox.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;dragover&quot;</span>, dragover, <span class="hljs-literal">false</span>);<br>dropbox.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;drop&quot;</span>, drop, <span class="hljs-literal">false</span>);<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">drop</span>(<span class="hljs-params">e</span>) &#123;<br>  e.<span class="hljs-title function_">stopPropagation</span>();<br>  e.<span class="hljs-title function_">preventDefault</span>();<br><br>  <span class="hljs-keyword">var</span> dt = e.<span class="hljs-property">dataTransfer</span>;<br>  <span class="hljs-keyword">var</span> files = dt.<span class="hljs-property">files</span>;<br><br>  <span class="hljs-title function_">handleFiles</span>(files);<br>&#125;<br><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleFiles</span>(<span class="hljs-params">files</span>) &#123;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; files.<span class="hljs-property">length</span>; i++) &#123;<br>    <span class="hljs-keyword">var</span> file = files[i];<br>    <span class="hljs-keyword">var</span> imageType = <span class="hljs-regexp">/^image\//</span>;<br>    <br>    <span class="hljs-keyword">if</span> (!imageType.<span class="hljs-title function_">test</span>(file.<span class="hljs-property">type</span>)) &#123;<br>      <span class="hljs-keyword">continue</span>;<br>    &#125;<br>    <br>    <span class="hljs-keyword">var</span> img = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;img&quot;</span>);<br>    img.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;obj&quot;</span>);<br>    img.<span class="hljs-property">file</span> = file;<br>    preview.<span class="hljs-title function_">appendChild</span>(img); <span class="hljs-comment">// Assuming that &quot;preview&quot; is the div output where the content will be displayed.</span><br>    <br>    <span class="hljs-keyword">var</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();<br>    reader.<span class="hljs-property">onload</span> = (<span class="hljs-keyword">function</span>(<span class="hljs-params">aImg</span>) &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123; aImg.<span class="hljs-property">src</span> = e.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>; &#125;; &#125;)(img);<br>    reader.<span class="hljs-title function_">readAsDataURL</span>(file);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="使用-object-URLs"><a href="#使用-object-URLs" class="headerlink" title="使用 object URLs"></a>使用 object URLs</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> objectURL = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(fileObj);<br><br><span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(objectURL);<br></code></pre></td></tr></table></figure>

<h4 id="e-g-使用-object-URLs-显示图像"><a href="#e-g-使用-object-URLs-显示图像" class="headerlink" title="e.g: 使用 object URLs 显示图像"></a>e.g: 使用 object URLs 显示图像</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fileElem&quot;</span> <span class="hljs-attr">multiple</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">&quot;image/*&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display:none&quot;</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">&quot;handleFiles(this.files)&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fileSelect&quot;</span>&gt;</span>Select some files<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fileList&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>No files selected!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">webkitURL</span>;<br><span class="hljs-keyword">var</span> fileSelect = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;fileSelect&quot;</span>),<br>    fileElem   = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;fileElem&quot;</span>),<br>    fileList   = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;fileList&quot;</span>);<br>fileSelect.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;<br>  <span class="hljs-keyword">if</span> (fileElem) &#123;<br>    fileElem.<span class="hljs-title function_">click</span>();<br>  &#125;<br>  e.<span class="hljs-title function_">preventDefault</span>(); <span class="hljs-comment">// prevent navigation to &quot;#&quot;</span><br>&#125;, <span class="hljs-literal">false</span>);<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleFiles</span>(<span class="hljs-params">files</span>) &#123;<br>  <span class="hljs-keyword">if</span> (!files.<span class="hljs-property">length</span>) &#123;<br>    fileList.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;&lt;p&gt;No files selected!&lt;/p&gt;&quot;</span>;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    fileList.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">var</span> list = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;ul&quot;</span>);<br>    fileList.<span class="hljs-title function_">appendChild</span>(list);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; files.<span class="hljs-property">length</span>; i++) &#123;<br>      <span class="hljs-keyword">var</span> li = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;li&quot;</span>);<br>      list.<span class="hljs-title function_">appendChild</span>(li);<br>      <span class="hljs-keyword">var</span> img = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;img&quot;</span>);<br>      img.<span class="hljs-property">src</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(files[i]);<br>      img.<span class="hljs-property">height</span> = <span class="hljs-number">60</span>;<br>      img.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">src</span>);<br>      &#125;<br>      li.<span class="hljs-title function_">appendChild</span>(img);<br>      <span class="hljs-keyword">var</span> info = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;span&quot;</span>);<br>      info.<span class="hljs-property">innerHTML</span> = files[i].<span class="hljs-property">name</span> + <span class="hljs-string">&quot;: &quot;</span> + files[i].<span class="hljs-property">size</span> + <span class="hljs-string">&quot; bytes&quot;</span>;<br>      li.<span class="hljs-title function_">appendChild</span>(info);<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol>
<li>A new unordered list (<ul>) element is created.</li>
<li>The new list element is inserted into the <div> block by calling its element.appendChild() method.</li>
<li>For each File in the FileList represented by files:</li>
<li>Create a new list item (<li>) element and insert it into the list.</li>
<li>Create a new image (<img>) element.</li>
<li>Set the image’s source to a new object URL representing the file, using window.URL.createObjectURL() to create the blob URL.</li>
<li>Set the image’s height to 60 pixels.</li>
<li>Set up the image’s load event handler to release the object URL since it’s no longer needed once the image has been loaded. This is done by calling the window.URL.revokeObjectURL() method and passing in the object URL string as specified by img.src.</li>
<li>Append the new list item to the list.</li>
</ol>
<h3 id="上传选择的文件"><a href="#上传选择的文件" class="headerlink" title="上传选择的文件"></a>上传选择的文件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">FileUpload</span>(<span class="hljs-params">img, file</span>) &#123;<br>  <span class="hljs-keyword">var</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();  <br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">ctrl</span> = <span class="hljs-title function_">createThrobber</span>(img);<br>  <span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">xhr</span> = xhr;<br>  <br>  <span class="hljs-keyword">var</span> self = <span class="hljs-variable language_">this</span>;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">xhr</span>.<span class="hljs-property">upload</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;progress&quot;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">lengthComputable</span>) &#123;<br>          <span class="hljs-keyword">var</span> percentage = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>((e.<span class="hljs-property">loaded</span> * <span class="hljs-number">100</span>) / e.<span class="hljs-property">total</span>);<br>          self.<span class="hljs-property">ctrl</span>.<span class="hljs-title function_">update</span>(percentage);<br>        &#125;<br>      &#125;, <span class="hljs-literal">false</span>);<br>  <br>  xhr.<span class="hljs-property">upload</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;load&quot;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)&#123;<br>          self.<span class="hljs-property">ctrl</span>.<span class="hljs-title function_">update</span>(<span class="hljs-number">100</span>);<br>          <span class="hljs-keyword">var</span> canvas = self.<span class="hljs-property">ctrl</span>.<span class="hljs-property">ctx</span>.<span class="hljs-property">canvas</span>;<br>          canvas.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">removeChild</span>(canvas);<br>      &#125;, <span class="hljs-literal">false</span>);<br>  xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&quot;POST&quot;</span>, <span class="hljs-string">&quot;http://demos.hacks.mozilla.org/paul/demos/resources/webservices/devnull.php&quot;</span>);<br>  xhr.<span class="hljs-title function_">overrideMimeType</span>(<span class="hljs-string">&#x27;text/plain; charset=x-user-defined-binary&#x27;</span>);<br>  reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) &#123;<br>    xhr.<span class="hljs-title function_">send</span>(evt.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>);<br>  &#125;;<br>  reader.<span class="hljs-title function_">readAsBinaryString</span>(file);<br>&#125;<br></code></pre></td></tr></table></figure>

<ol>
<li>The XMLHttpRequest’s upload progress listener is set to update the throbber with new percentage information so that as the upload progresses the throbber will be updated based on the latest information.</li>
<li>The XMLHttpRequest’s upload load event handler is set to update the throbber progress information to 100% to ensure the progress indicator actually reaches 100% (in case of granularity quirks during the process). It then removes the throbber since it’s no longer needed. This causes the throbber to disappear once the upload is complete.</li>
<li>The request to upload the image file is opened by calling XMLHttpRequest’s open() method to start generating a POST request.</li>
<li>The MIME type for the upload is set by calling the XMLHttpRequest function overrideMimeType(). In this case, we’re using a generic MIME type; you may or may not need to set the MIME type at all depending on your use case.</li>
<li>The FileReader object is used to convert the file to a binary string.</li>
<li>Finally, when the content is loaded the XMLHttpRequest function send() is called to upload the file’s content.</li>
</ol>
<h3 id="使用-object-URLs-显示-PDF"><a href="#使用-object-URLs-显示-PDF" class="headerlink" title="使用 object URLs 显示 PDF"></a>使用 <code>object URLs</code> 显示 <code>PDF</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;viewer&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> obj_url = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);<br><span class="hljs-keyword">var</span> iframe = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;viewer&#x27;</span>);<br>iframe.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&#x27;src&#x27;</span>, obj_url);<br><span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(obj_url);<br></code></pre></td></tr></table></figure>

<h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Blob">blob</a></p>
<p>一个<code>blob</code>对象就是这个文件的原始数据。
　　　</p>
<h1 id="媒体"><a href="#媒体" class="headerlink" title="媒体"></a>媒体</h1><h2 id="使用-HTML5-的-audio-amp-96-video"><a href="#使用-HTML5-的-audio-amp-96-video" class="headerlink" title="使用 HTML5 的 audio &amp; &#96;video"></a>使用 <code>HTML5</code> 的 <code>audio</code> &amp; &#96;video</h2><p>　　　</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;http://v2v.cc/~j/theora_testsuite/320x240.ogg&quot;</span> <span class="hljs-attr">controls</span>&gt;</span><br>  Your browser does not support the <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>video<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span> element.<br><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">audio</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/test/audio.ogg&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Your browser does not support the <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>audio<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span> element.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">audio</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h2 id="WebRTC-API-Web-Real-Time-Communication"><a href="#WebRTC-API-Web-Real-Time-Communication" class="headerlink" title="WebRTC API (Web Real-Time Communication)"></a>WebRTC API (Web Real-Time Communication)</h2><p>这个API很强大，webRTC （Web Real-Time Communication）是一个支持网页浏览器进行实时语音对话或视频对话的技术，缺点是只在 PC 的 Chrome 上支持较好，移动端支持不太理想。</p>
<h3 id="使用webRTC录制视频基本流程"><a href="#使用webRTC录制视频基本流程" class="headerlink" title="使用webRTC录制视频基本流程"></a>使用webRTC录制视频基本流程</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API">MDN WEBRTC API</a></p>
<ol>
<li>调用 window.navigator.webkitGetUserMedia() 获取用户的PC摄像头视频数据。</li>
<li>将获取到视频流数据转换成 window.webkitRTCPeerConnection (一种视频流数据格式)。</li>
<li>利用 WebScoket 将视频流数据传输到服务端。</li>
</ol>
<h2 id="使用-Camera-API"><a href="#使用-Camera-API" class="headerlink" title="使用 Camera API"></a>使用 Camera API</h2><p>这个API目前只适用于Firefox 浏览器 ,下面的例子在手机端浏览器打开，会显示拍照选项，拍照后，或选择照片后会显示在网页上。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Mozilla/B2G_OS/API/Camera_API">https://developer.mozilla.org/en-US/docs/Mozilla/B2G_OS&#x2F;API&#x2F;Camera_API</a></p>
<p>语法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> cameraManager = <span class="hljs-variable language_">window</span>.<span class="hljs-property">navigator</span>.<span class="hljs-property">mozCameras</span>;<br></code></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;take-picture&quot;</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">&quot;image/*&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;about:blank&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;show-picture&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs javascript">(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> takePicture = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#take-picture&quot;</span>),<br>        showPicture = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#show-picture&quot;</span>);<br><br>    <span class="hljs-keyword">if</span> (takePicture &amp;&amp; showPicture) &#123;<br>        <span class="hljs-comment">// Set events</span><br>        takePicture.<span class="hljs-property">onchange</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br>            <span class="hljs-comment">// Get a reference to the taken picture or chosen file</span><br>            <span class="hljs-keyword">var</span> files = event.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>,<br>                file;<br>            <span class="hljs-keyword">if</span> (files &amp;&amp; files.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) &#123;<br>                file = files[<span class="hljs-number">0</span>];<br>                <span class="hljs-keyword">try</span> &#123;<br>                    <span class="hljs-comment">// Get window.URL object</span><br>                    <span class="hljs-keyword">var</span> <span class="hljs-variable constant_">URL</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">webkitURL</span>;<br><br>                    <span class="hljs-comment">// Create ObjectURL</span><br>                    <span class="hljs-keyword">var</span> imgURL = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(file);<br><br>                    <span class="hljs-comment">// Set img src to ObjectURL</span><br>                    showPicture.<span class="hljs-property">src</span> = imgURL;<br><br>                    <span class="hljs-comment">// Revoke ObjectURL after imagehas loaded</span><br>                    showPicture.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>                        <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(imgURL);  <br>                    &#125;;<br>                &#125;<br>                <span class="hljs-keyword">catch</span> (e) &#123;<br>                    <span class="hljs-keyword">try</span> &#123;<br>                        <span class="hljs-comment">// Fallback if createObjectURL is not supported</span><br>                        <span class="hljs-keyword">var</span> fileReader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();<br>                        fileReader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br>                            showPicture.<span class="hljs-property">src</span> = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>;<br>                        &#125;;<br>                        fileReader.<span class="hljs-title function_">readAsDataURL</span>(file);<br>                    &#125;<br>                    <span class="hljs-keyword">catch</span> (e) &#123;<br>                        <span class="hljs-comment">// Display error message</span><br>                        <span class="hljs-keyword">var</span> error = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#error&quot;</span>);<br>                        <span class="hljs-keyword">if</span> (error) &#123;<br>                            error.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;Neither createObjectURL or FileReader are supported&quot;</span>;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;;<br>    &#125;<br>&#125;)();<br></code></pre></td></tr></table></figure>

<h2 id="track-标签"><a href="#track-标签" class="headerlink" title="track 标签"></a><code>track</code> 标签</h2><blockquote>
<p>track用来指定 audio 元素和 video 元素的字幕、标题、章节等轨信息。HTML5追加内容，现在还没什么浏览器支持，将来有可能会有改动。</p>
</blockquote>
<p>HTML代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><br><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;brave.webm&quot;</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">track</span> <span class="hljs-attr">kind</span>=<span class="hljs-string">&quot;subtitles&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;brave.ja.vtt&quot;</span> <span class="hljs-attr">srclang</span>=<span class="hljs-string">&quot;zh&quot;</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;Chinese&quot;</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">track</span> <span class="hljs-attr">kind</span>=<span class="hljs-string">&quot;subtitles&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;brave.en.vtt&quot;</span> <span class="hljs-attr">srclang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;English&quot;</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">track</span> <span class="hljs-attr">kind</span>=<span class="hljs-string">&quot;subtitles&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;brave.de.vtt&quot;</span> <span class="hljs-attr">srclang</span>=<span class="hljs-string">&quot;de&quot;</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;Deutsch&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h1 id="3D图形和效果"><a href="#3D图形和效果" class="headerlink" title="3D图形和效果"></a>3D图形和效果</h1><h2 id="Canvas-画布"><a href="#Canvas-画布" class="headerlink" title="Canvas 画布"></a><code>Canvas</code> 画布</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tutorial&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;150&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;150&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>得到<code>canvas</code> 上下文</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;tutorial&#x27;</span>);<br><span class="hljs-keyword">if</span> (canvas.<span class="hljs-property">getContext</span>)&#123;<br>  <span class="hljs-keyword">var</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">&#x27;2d&#x27;</span>);<br>  <span class="hljs-comment">// drawing code here</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  <span class="hljs-comment">// canvas-unsupported code here</span><br>&#125;<br></code></pre></td></tr></table></figure>


<p>e.g:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">&quot;rgb(200,0,0)&quot;</span>;<br>        ctx.<span class="hljs-property">fillRect</span> (<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>);<br><br>        ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">&quot;rgba(0, 0, 200, 0.5)&quot;</span>;<br>        ctx.<span class="hljs-property">fillRect</span> (<span class="hljs-number">30</span>, <span class="hljs-number">30</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>);<br></code></pre></td></tr></table></figure>

<p>具体用法<br><a target="_blank" rel="noopener" href="http://www.runoob.com/tags/ref-canvas.html">http://www.runoob.com/tags/ref-canvas.html</a></p>
<h2 id="WebGl"><a href="#WebGl" class="headerlink" title="WebGl"></a>WebGl</h2><p>如果说<code>Canvas</code>实在2D上做图，那么<code>WebGL</code>就提供了浏览器3D绘图的能力，这是百度百科的解释：</p>
<blockquote>
<p>WebGL（全写Web Graphics Library）是一种3D绘图标准，这种绘图技术标准允许把JavaScript和OpenGL ES 2.0结合在一起，通过增加OpenGL ES 2.0的一个JavaScript绑定，WebGL可以为HTML5 Canvas提供硬件3D加速渲染，这样Web开发人员就可以借助系统显卡来在浏览器里更流畅地展示3D场景和模型了，还能创建复杂的导航和数据视觉化。显然，WebGL技术标准免去了开发网页专用渲染插件的麻烦，可被用于创建具有复杂3D结构的网站页面，甚至可以用来设计3D网页游戏等等。</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API">https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API</a></p>
<p>主要代表有<a target="_blank" rel="noopener" href="https://github.com/mrdoob/three.js">three.js</a></p>
<p>先不做研究。</p>
<h2 id="SVG"><a href="#SVG" class="headerlink" title="SVG"></a>SVG</h2><blockquote>
<p>矢量图像的基于xml的格式,可以直接嵌入到HTML中。</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="http://www.w3school.com.cn/svg/">http://www.w3school.com.cn/svg/</a></p>
<h1 id="性能和集成"><a href="#性能和集成" class="headerlink" title="性能和集成"></a>性能和集成</h1><h2 id="Web-Workers"><a href="#Web-Workers" class="headerlink" title="Web Workers"></a>Web Workers</h2><blockquote>
<p>网络工作者提供一个简单的方法Web内容在后台线程运行脚本。工作线程可以执行任务而不干扰用户界面。此外,他们可以执行I &#x2F; O使用XMLHttpRequest(虽然responseXML和通道属性总是零)。一旦创建,一个工人可以将消息发送到创建它的JavaScript代码发布信息到指定的事件处理程序的代码(反之亦然)。本文提供了一个详细的介绍使用web工人。</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers">https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers</a></p>
<h2 id="XMLHttpRequest-level2-AJax-2-0"><a href="#XMLHttpRequest-level2-AJax-2-0" class="headerlink" title="XMLHttpRequest level2 (AJax 2.0)"></a>XMLHttpRequest level2 (AJax 2.0)</h2><p><a href="">https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest</a></p>
<h2 id="History-API"><a href="#History-API" class="headerlink" title="History API"></a>History API</h2><blockquote>
<p>允许浏览器的操作历史。这是特别有用的页面加载交互新信息。</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/History_API">https://developer.mozilla.org/en-US/docs/Web/API/History_API</a></p>
<h2 id="96-contenteditable-x3D-”true”"><a href="#96-contenteditable-x3D-”true”" class="headerlink" title="&#96;contenteditable&#x3D;”true”"></a>&#96;contenteditable&#x3D;”true”</h2><p> 这个属性可以让html页面上的内容被编辑。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">contenteditable</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br>  This text can be edited by the user.<br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h2 id="History-APi"><a href="#History-APi" class="headerlink" title="History APi"></a>History APi</h2><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/History_API">https://developer.mozilla.org/en-US/docs/Web/API/History_API</a></p>
<p>允许浏览器的操作历史。这是对页面加载交互新信息特别有用。（操作url的<code>hash</code>值）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">back</span>();<span class="hljs-comment">//类似浏览器后退按钮，相对应</span><br><span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">forward</span>();<br></code></pre></td></tr></table></figure>

<p>&#x2F;&#x2F; 通过<code>go()</code>方法来返回前进到特定页面</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">go</span>(-<span class="hljs-number">1</span>);<span class="hljs-comment">//后退一个页面</span><br><span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">go</span>(-<span class="hljs-number">2</span>);<span class="hljs-comment">//后退两个页面</span><br><span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">go</span>(<span class="hljs-number">1</span>);<span class="hljs-comment">//前进一个页面</span><br></code></pre></td></tr></table></figure>

<p>您可以通过查看长度属性的值来确定历史堆栈中的页数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> numberOfEntries = <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span>;<br></code></pre></td></tr></table></figure>

<h2 id="HTML-Drag-and-Drop-API"><a href="#HTML-Drag-and-Drop-API" class="headerlink" title="HTML Drag and Drop API"></a>HTML Drag and Drop API</h2><blockquote>
<p>HTML拖放接口使应用程序能够使用拖和Firefox等浏览器滴特征。例如，有了这些功能，用户可以选择用鼠标拖动元素，拖动元素到一个可删除的元素，这些元素和下降释放鼠标按键。</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API">https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API</a></p>
<table>
<thead>
<tr>
<th>事件</th>
<th>事件方法</th>
<th>介绍</th>
</tr>
</thead>
<tbody><tr>
<td>drag</td>
<td>ondrag</td>
<td>Fired when an element or text selection is being dragged.</td>
</tr>
<tr>
<td>dragend</td>
<td>ondragend</td>
<td>Fired when a drag operation is being ended (for example, by releasing a mouse button or hitting the escape key). (See Finishing a Drag.)</td>
</tr>
<tr>
<td>dragenter</td>
<td>ondragenter</td>
<td>Fired when a dragged element or text selection enters a valid drop target. (See Specifying Drop Targets.)</td>
</tr>
<tr>
<td>dragexit</td>
<td>ondragexit</td>
<td>Fired when an element is no longer the drag operation’s immediate selection target.</td>
</tr>
<tr>
<td>dragleave</td>
<td>ondragleave</td>
<td>Fired when a dragged element or text selection leaves a valid drop target.</td>
</tr>
<tr>
<td>dragover</td>
<td>ondragover</td>
<td>Fired when an element or text selection is being dragged over a valid drop target (every few hundred milliseconds).</td>
</tr>
<tr>
<td>dragstart</td>
<td>ondragstart</td>
<td>Fired when the user starts dragging an element or text selection. (See Starting a Drag Operation.)</td>
</tr>
<tr>
<td>drop</td>
<td>ondrop	Fired when</td>
<td>an element or text selection is dropped on a valid drop target. (See Performing a Drop.)</td>
</tr>
</tbody></table>
<h2 id="Document-hasFocus"><a href="#Document-hasFocus" class="headerlink" title="Document.hasFocus()"></a>Document.hasFocus()</h2><blockquote>
<p>文件。hasfocus()方法返回一个布尔值，指示是否文件或任何元素在文档具有焦点。此方法可用于确定文档中的活动元素是否具有焦点.。</p>
</blockquote>
<p><em>语法</em></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">focused = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">hasFocus</span>();<br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">setInterval</span>( checkPageFocus, <span class="hljs-number">200</span> );<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">checkPageFocus</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> info = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;message&quot;</span>);<br><br>  <span class="hljs-keyword">if</span> ( <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">hasFocus</span>() ) &#123;<br>    info.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;The document has the focus.&quot;</span>;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    info.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;The document doesn&#x27;t have the focus.&quot;</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">openWindow</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">window</span>.<span class="hljs-property">open</span> (<br>    <span class="hljs-string">&quot;http://developer.mozilla.org/&quot;</span>,<br>    <span class="hljs-string">&quot;mozdev&quot;</span>,<br>    <span class="hljs-string">&quot;width=640,</span><br><span class="hljs-string">    height=300,</span><br><span class="hljs-string">    left=150,</span><br><span class="hljs-string">    top=260&quot;</span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Document-focus"><a href="#Document-focus" class="headerlink" title="Document.focus()"></a>Document.focus()</h2><blockquote>
<p>让元素获得焦点</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;message&quot;</span>).<span class="hljs-title function_">focus</span>();<br></code></pre></td></tr></table></figure>

<h2 id="基于Web的协议处理程序"><a href="#基于Web的协议处理程序" class="headerlink" title="基于Web的协议处理程序"></a>基于Web的协议处理程序</h2><p><a target="_blank" rel="noopener" href="https://www.w3.org/TR/2011/WD-html5-20110525/timers.html#custom-handlers">https://www.w3.org/TR/2011/WD-html5-20110525/timers.html#custom-handlers</a></p>
<blockquote>
<p>实现调起本地邮箱软件发送邮件</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;mailto:webmaster@example.com&quot;</span>&gt;</span>Web Master<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>在 <code>APP中的网页</code> <code>Hybird APP</code> 用 <code>URL Scheme</code> 来调用其他APP</p>
</blockquote>
<ol>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/19907735">你所知道好玩有趣的 iOS URL Scheme 有哪些?</a></li>
<li><a target="_blank" rel="noopener" href="http://www.idownloadblog.com/2011/11/07/quickly-launch-apps-with-siri/?utm_source=dlvr.it&utm_medium=twitter">利用 URL schemes 实现 Siri 启动应用程序</a></li>
<li><a target="_blank" rel="noopener" href="http://wiki.akosma.com/IPhone_URL_Schemes">一个收录大部分 URL schemes 的维基页面</a></li>
<li><a target="_blank" rel="noopener" href="http://handleopenurl.com/scheme"> 一个 iOS URL schemes 目录</a></li>
</ol>
<h3 id="注册事件"><a href="#注册事件" class="headerlink" title="注册事件"></a>注册事件</h3><blockquote>
<p>将web应用程序设置为协议处理程序不是一个困难的过程.。基本上，Web应用程序使用registerprotocolhandler()以浏览器为一个给定的协议处理程序登记本身的潜力。</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/registerProtocolHandler">registerProtocolHandler()</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">navigator.<span class="hljs-title function_">registerProtocolHandler</span>(<span class="hljs-string">&quot;burger&quot;</span>,<br>                                  <span class="hljs-string">&quot;http://www.google.co.uk/?uri=%s&quot;</span>,<br>                                  <span class="hljs-string">&quot;Burger handler&quot;</span>);<br></code></pre></td></tr></table></figure>

<p>触发</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hey have you seen <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;burger:cheeseburger&quot;</span>&gt;</span>this<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> before?<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>实际上是访问的 <code>http://www.google.co.uk/?uri=burger:cheeseburger</code></p>
<h2 id="window-requestAnimationFrame"><a href="#window-requestAnimationFrame" class="headerlink" title="window.requestAnimationFrame()"></a>window.requestAnimationFrame()</h2><blockquote>
<p>在浏览器动画程序中，我们通常使用一个定时器来循环每隔几毫秒移动目标物体一次，来让它动起来。如今有一个好消息，浏览器开发商们决定：“嗨，为什么我们不在浏览器里提供这样一个API呢，这样一来我们可以为用户优化他们的动画。”所以，这个requestAnimationFrame()函数就是针对动画效果的API，你可以把它用在DOM上的风格变化或画布动画或WebGL中。</p>
</blockquote>
<p>好处</p>
<blockquote>
<p>浏览器可以优化并行的动画动作，更合理的重新排列动作序列，并把能够合并的动作放在一个渲染周期内完成，从而呈现出更流畅的动画效果。比如，通过requestAnimationFrame()，JS动画能够和CSS动画&#x2F;变换或SVG SMIL动画同步发生。另外，如果在一个浏览器标签页里运行一个动画，当这个标签页不可见时，浏览器会暂停它，这会减少CPU，内存的压力，节省电池电量。</p>
</blockquote>
<blockquote>
<p>兼容</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-property">requestAnimationFrame</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">requestAnimationFrame</span> <br>                                || <span class="hljs-variable language_">window</span>.<span class="hljs-property">mozRequestAnimationFrame</span> <br>                                || <span class="hljs-variable language_">window</span>.<span class="hljs-property">webkitRequestAnimationFrame</span> <br>                                || <span class="hljs-variable language_">window</span>.<span class="hljs-property">msRequestAnimationFrame</span>;<br></code></pre></td></tr></table></figure>

<p>例子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> start = <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">var</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;SomeElementYouWantToAnimate&quot;</span>);<br>element.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">&#x27;absolute&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">step</span>(<span class="hljs-params">timestamp</span>) &#123;<br>  <span class="hljs-keyword">if</span> (!start) start = timestamp;<br>  <span class="hljs-keyword">var</span> progress = timestamp - start;<br>  element.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(progress/<span class="hljs-number">10</span>, <span class="hljs-number">200</span>) + <span class="hljs-string">&quot;px&quot;</span>;<br>  <span class="hljs-keyword">if</span> (progress &lt; <span class="hljs-number">2000</span>) &#123;<br>    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">requestAnimationFrame</span>(step);<br>  &#125;<br>&#125;<br><br><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">requestAnimationFrame</span>(step);<br></code></pre></td></tr></table></figure>

<h2 id="FullScreen-API"><a href="#FullScreen-API" class="headerlink" title="FullScreen API"></a>FullScreen API</h2><blockquote>
<p>全屏API提供Web内容是利用用户的整个屏幕上出现了一个简单的方法。该API可以让你轻松地直接浏览器使元素和它的孩子，如果有，占据全屏，消除所有浏览器的用户界面和其他应用程序的屏幕时间。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;keydown&quot;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">keyCode</span> == <span class="hljs-number">13</span>) &#123;<br>    <span class="hljs-title function_">toggleFullScreen</span>();<br>  &#125;<br>&#125;, <span class="hljs-literal">false</span>);<br><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">toggleFullScreen</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">fullscreenElement</span>) &#123;<br>      <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-title function_">requestFullscreen</span>();<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">exitFullscreen</span>) &#123;<br>      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">exitFullscreen</span>(); <br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<p>事件</p>
<ul>
<li>Document.fullscreen</li>
<li>Document.fullscreenElement</li>
<li>Document.onfullscreenchange</li>
<li>Document.onfullscreenerror</li>
</ul>
<h2 id="Pointer-Lock-API"><a href="#Pointer-Lock-API" class="headerlink" title="Pointer Lock API"></a>Pointer Lock API</h2><p><a target="_blank" rel="noopener" href="http://www.tfan.org/pointer-lock-api/">http://www.tfan.org/pointer-lock-api/</a></p>
<blockquote>
<p>指针锁定(以前叫做 鼠标锁定) 提供了一种输入方法，这种方法是基于鼠标随着时间推移的运动的（也就是说，deltas），而不仅是鼠标光标的绝对位置。通过它可以访问原始的鼠标运动，把鼠标事件的目标锁定到一个单独的元素，这就消除了鼠标在一个单独的方向上到底可以移动多远这方面的限制，并从视图中删去光标。</p>
</blockquote>
<p>  这个 API 对于需要大量的鼠标输入来控制运动，旋转物体，以及更改项目的应用程序来说非常有用。对高度视觉化的应用程序尤其重要，例如那些使用第一人称视角的应用程序，以及 3D 视图和建模。</p>
<p>  举例来说，你可以创建让你的用户简单地通过移动鼠标而不需要点击任何按钮就可以控制视角的应用。那么这些按钮就可以被用作其他动作。这类鼠标输入对于查看地图，卫星图像，或者第一人称场景（例如在一个游戏中或者一个全景视频中）是非常方便使用的。</p>
<p>  即使在光标移到浏览器或者屏幕区域之外，指针锁定也能够让你访问鼠标事件。例如，你的用户可以通过不断地移动鼠标来持续旋转或操纵一个 3D 模型。如果没有指针锁定的话，这些旋转或操纵会在指针到达浏览器或者屏幕边缘的那一刻停止。尤其是游戏玩家将会因为此功能而兴奋不已，因为他们可以疯狂地点击按钮，来回地滑动鼠标光标，而不必担心离开了游戏区域，进而不小心误点到另外一个应用程序上，结果将鼠标焦点移离了游戏。杯具了！</p>
<h1 id="访问设备"><a href="#访问设备" class="headerlink" title="访问设备"></a>访问设备</h1><h2 id="Touch-events"><a href="#Touch-events" class="headerlink" title="Touch events"></a>Touch events</h2><blockquote>
<p>移动端的触摸事件</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">startup</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> el = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByTagName</span>(<span class="hljs-string">&quot;canvas&quot;</span>)[<span class="hljs-number">0</span>];<br>  el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;touchstart&quot;</span>, handleStart, <span class="hljs-literal">false</span>);<br>  el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;touchend&quot;</span>, handleEnd, <span class="hljs-literal">false</span>);<br>  el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;touchcancel&quot;</span>, handleCancel, <span class="hljs-literal">false</span>);<br>  el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;touchmove&quot;</span>, handleMove, <span class="hljs-literal">false</span>);<br>  <span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;initialized.&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><ul>
<li>Touch <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">touch = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Touch</span>(touchInit);<br></code></pre></td></tr></table></figure></li>
</ul>
<ol>
<li>Touch.clientX</li>
<li>Touch.clientY</li>
<li>Touch.force</li>
<li>Touch.identifier<br>…</li>
</ol>
<ul>
<li>TouchEvent </li>
<li>TouchList</li>
</ul>
<h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><ul>
<li>touchstart</li>
<li>touchend</li>
<li>touchmove</li>
<li>touchcancel</li>
</ul>
<h2 id="HTML5定位"><a href="#HTML5定位" class="headerlink" title="HTML5定位"></a>HTML5定位</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">geoFindMe</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> output = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;out&quot;</span>);<br><br>  <span class="hljs-keyword">if</span> (!navigator.<span class="hljs-property">geolocation</span>)&#123;<br>    output.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;&lt;p&gt;Geolocation is not supported by your browser&lt;/p&gt;&quot;</span>;<br>    <span class="hljs-keyword">return</span>;<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">success</span>(<span class="hljs-params">position</span>) &#123;<br>    <span class="hljs-keyword">var</span> latitude  = position.<span class="hljs-property">coords</span>.<span class="hljs-property">latitude</span>;<br>    <span class="hljs-keyword">var</span> longitude = position.<span class="hljs-property">coords</span>.<span class="hljs-property">longitude</span>;<br><br>    output.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&#x27;&lt;p&gt;Latitude is &#x27;</span> + latitude + <span class="hljs-string">&#x27;° &lt;br&gt;Longitude is &#x27;</span> + longitude + <span class="hljs-string">&#x27;°&lt;/p&gt;&#x27;</span>;<br><br>    <span class="hljs-keyword">var</span> img = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();<br>    img.<span class="hljs-property">src</span> = <span class="hljs-string">&quot;https://maps.googleapis.com/maps/api/staticmap?center=&quot;</span> + latitude + <span class="hljs-string">&quot;,&quot;</span> + longitude + <span class="hljs-string">&quot;&amp;zoom=13&amp;size=300x300&amp;sensor=false&quot;</span>;<br><br>    output.<span class="hljs-title function_">appendChild</span>(img);<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">error</span>(<span class="hljs-params"></span>) &#123;<br>    output.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;Unable to retrieve your location&quot;</span>;<br>  &#125;<br><br>  output.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;&lt;p&gt;Locating…&lt;/p&gt;&quot;</span>;<br><br>  navigator.<span class="hljs-property">geolocation</span>.<span class="hljs-title function_">getCurrentPosition</span>(success, error);<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="设备的陀螺仪"><a href="#设备的陀螺仪" class="headerlink" title="设备的陀螺仪"></a>设备的陀螺仪</h2><blockquote>
<p>通过这个API可以访问设备的陀螺仪信息</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;devicemotion&quot;</span>, handleMotion, <span class="hljs-literal">true</span>);<br></code></pre></td></tr></table></figure>


<ol>
<li>DeviceMotionEvent.acceleration</li>
<li>DeviceMotionEvent.accelerationIncludingGravity</li>
<li>DeviceMotionEvent.rotationRate</li>
<li>DeviceMotionEvent.interval</li>
</ol>
<p>简单的例子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> ball   = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.ball&#x27;</span>);<br><span class="hljs-keyword">var</span> garden = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.garden&#x27;</span>);<br><span class="hljs-keyword">var</span> output = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.output&#x27;</span>);<br><br><span class="hljs-keyword">var</span> maxX = garden.<span class="hljs-property">clientWidth</span>  - ball.<span class="hljs-property">clientWidth</span>;<br><span class="hljs-keyword">var</span> maxY = garden.<span class="hljs-property">clientHeight</span> - ball.<span class="hljs-property">clientHeight</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleOrientation</span>(<span class="hljs-params">event</span>) &#123;<br>  <span class="hljs-keyword">var</span> x = event.<span class="hljs-property">beta</span>;  <span class="hljs-comment">// In degree in the range [-180,180]</span><br>  <span class="hljs-keyword">var</span> y = event.<span class="hljs-property">gamma</span>; <span class="hljs-comment">// In degree in the range [-90,90]</span><br><br>  output.<span class="hljs-property">innerHTML</span>  = <span class="hljs-string">&quot;beta : &quot;</span> + x + <span class="hljs-string">&quot;\n&quot;</span>;<br>  output.<span class="hljs-property">innerHTML</span> += <span class="hljs-string">&quot;gamma: &quot;</span> + y + <span class="hljs-string">&quot;\n&quot;</span>;<br><br>  <span class="hljs-comment">// Because we don&#x27;t want to have the device upside down</span><br>  <span class="hljs-comment">// We constrain the x value to the range [-90,90]</span><br>  <span class="hljs-keyword">if</span> (x &gt;  <span class="hljs-number">90</span>) &#123; x =  <span class="hljs-number">90</span>&#125;;<br>  <span class="hljs-keyword">if</span> (x &lt; -<span class="hljs-number">90</span>) &#123; x = -<span class="hljs-number">90</span>&#125;;<br><br>  <span class="hljs-comment">// To make computation easier we shift the range of </span><br>  <span class="hljs-comment">// x and y to [0,180]</span><br>  x += <span class="hljs-number">90</span>;<br>  y += <span class="hljs-number">90</span>;<br><br>  <span class="hljs-comment">// 10 is half the size of the ball</span><br>  <span class="hljs-comment">// It center the positioning point to the center of the ball</span><br>  ball.<span class="hljs-property">style</span>.<span class="hljs-property">top</span>  = (maxX*x/<span class="hljs-number">180</span> - <span class="hljs-number">10</span>) + <span class="hljs-string">&quot;px&quot;</span>;<br>  ball.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = (maxY*y/<span class="hljs-number">180</span> - <span class="hljs-number">10</span>) + <span class="hljs-string">&quot;px&quot;</span>;<br>&#125;<br><br><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;deviceorientation&#x27;</span>, handleOrientation);<br></code></pre></td></tr></table></figure>

<p>实例 <a target="_blank" rel="noopener" href="http://www.cnblogs.com/waitingbar/p/4682215.html">摇一摇</a></p>
<h1 id="HTML5-Notification-API"><a href="#HTML5-Notification-API" class="headerlink" title="HTML5 Notification API"></a>HTML5 Notification API</h1><blockquote>
<p>PC端的浏览器桌面通知功能。</p>
</blockquote>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> <span class="hljs-title class_">Notification</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">Notification</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">mozNotification</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">webkitNotification</span>;<br><br><span class="hljs-title class_">Notification</span>.<span class="hljs-title function_">requestPermission</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">permission</span>) &#123;<br>	<span class="hljs-comment">// console.log(permission);</span><br>&#125;);<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">show</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-variable language_">window</span>.<span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>		<span class="hljs-keyword">var</span> instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Notification</span>(<br>			<span class="hljs-string">&quot;标题&quot;</span>, &#123;<br>				<span class="hljs-attr">body</span>: <span class="hljs-string">&quot;消息&quot;</span>,<br>				<span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;http://resource.zwjay.cn/jekyll/img/avatar-zwj.jpg&quot;</span><br><br>			&#125;<br>		);<br><br>		instance.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>			<span class="hljs-comment">// Something to do</span><br>		&#125;;<br>		instance.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>			<span class="hljs-comment">// Something to do</span><br>		&#125;;<br>		instance.<span class="hljs-property">onshow</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>			<span class="hljs-comment">// Something to do</span><br>		&#125;;<br>		instance.<span class="hljs-property">onclose</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>			<span class="hljs-comment">// Something to do</span><br>		&#125;;<br>	&#125;, <span class="hljs-number">3000</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;show()&quot;</span>&gt;</span>Notify me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h1 id="最后：新增的CSS3"><a href="#最后：新增的CSS3" class="headerlink" title="最后：新增的CSS3"></a>最后：新增的CSS3</h1><ol>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Using_CSS_flexible_boxes">FlexBox</a> </li>
<li>动画</li>
<li>多列 （column-count）</li>
<li>过渡</li>
<li>2D 3D 转换</li>
<li>….</li>
</ol>

              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/HTML5/">#HTML5</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>HTML5-API汇总学习</div>
      <div>https://www.zwjay.cn/2016/11/30/2016-11-30-HTML5-API-all/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Mr.Jaxson</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2016年11月30日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2016/12/01/2016-12-20-git%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/" title="git常用操作-回滚代码">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">git常用操作-回滚代码</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2016/11/30/2016-11-30-Modify-cordova&amp;ionic-package-name/" title="修改ionic中android程序的包名">
                        <span class="hidden-mobile">修改ionic中android程序的包名</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    
      <script>
        Fluid.utils.loadComments('#disqus_thread', function() {
          Fluid.utils.createCssLink('https://lib.baomitu.com/disqusjs/1.3.0/disqusjs.css');
          Fluid.utils.createScript('https://lib.baomitu.com/disqusjs/1.3.0/disqus.js', function() {
            new DisqusJS({
              shortname: 'http-zwjay-cn',
              apikey: ''
            });
          });
        });
      </script>
    
    <noscript>Please enable JavaScript to view the comments</noscript>
  </div>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <!-- Baidu Analytics -->
    <script defer>
      if (!Fluid.ctx.dnt) {
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?0c5ab9917e153a67360172154ba0dc64";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      }
    </script>
  

  

  

  

  

  

  




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
